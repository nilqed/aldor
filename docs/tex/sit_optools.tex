\thistype{ExpressionTreeOperatorTools}
\History{Manuel Bronstein}{21/11/94}{created}
\Usage{import from \this}
\Descr{\this~provides utilities that make it simpler to write new operator
types.}
\begin{exports}
\alexp{infix}: & (TEXT, \altype{List} TREE, TREE) $\to$ \altype{Boolean}, & \\
& ~~~(TEXT, TREE) $\to$ TEXT, & \\
& ~~~\altype{String}, \altype{String}, \altype{String}) $\to$ TEXT &
Write as infix\\
\alexp{prefix}: & (TEXT, \altype{List} TREE, & \\
& ~~~(TEXT, TREE) $\to$ TEXT, & \\
& ~~~\altype{String}, \altype{String}, \altype{String}) $\to$ TEXT &
Write as prefix\\
\end{exports}
\begin{aswhere}
TEXT &==& \altype{TextWriter}\\
TREE &==& \altype{ExpressionTree}\\
\end{aswhere}
\alpage{infix}
\Usage{\name(p, [$t_1,\dots,t_n$], paren?, farg, op, left, right)}
\Signatures{
\name: & (TEXT, \altype{List} TREE, TREE $\to$ \altype{Boolean},
(TEXT, TREE) $\to$ TEXT,\\
& ~~~\altype{String}, \altype{String}, \altype{String}) $\to$ TEXT\\ }
\Params{
{\em p} & TEXT & The port to write to\\
{\em [$t_1,\dots,t_n$]} & \altype{List} TREE & The arguments of the operator\\
{\em paren?} & TREE $\to$ \altype{Boolean} & The parenthetization function\\
{\em farg} & (TEXT, TREE) $\to$ TEXT & The function for the arguments\\
{\em op} & \altype{String} & The infix symbol\\
{\em left} & \altype{String} & The left parenthesis (optional)\\
{\em right} & \altype{String} & The right parenthesis (optional)\\
}
\begin{aswhere}
TEXT &==& \altype{TextWriter}\\
TREE &==& \altype{ExpressionTree}\\
\end{aswhere}
\Descr{Writes $farg(t_1)~op~\dots~op~farg(t_n)$ to $p$, calling $farg$
on each argument, and calling $paren?$ to decide whether to parenthetize
each argument. Uses $left$ and $right$, which default to ``('' and ``)''
when parenthetizing.}
\alseealso{\alexp{prefix}}
\alpage{lisp}
\Usage{\name(p, s, [$t_1,\dots,t_n$])}
\Signature{(TEXT, \altype{String}, \altype{List} TREE)}{TEXT}
\Params{
{\em p} & TEXT & The port to write to\\
{\em s} & \altype{String} & A Lisp operator name\\
{\em [$t_1,\dots,t_n$]} & \altype{List} TREE & The arguments of the operator\\
}
\Descr{Writes $(s t_1 \dots t_n)$ to $p$, where each $t_i$ is written
in Lisp format.}
\alpage{prefix}
\Usage{
\name(p, t, paren?, farg, op, left, right)\\
\name(p, [$t_1,\dots,t_n$], farg, op, left, right)
}
\Signatures{
\name: & (TEXT, TREE, TREE $\to$ \altype{Boolean}, (TEXT, TREE) $\to$ TEXT,\\
 & \phantom{name:}~~~\altype{String}, \altype{String}, \altype{String})
$\to$ TEXT\\
\name: & (TEXT, \altype{List} TREE, (TEXT, TREE) $\to$ TEXT,\\
 & \phantom{name:}~~~\altype{String}, \altype{String}, \altype{String})
$\to$ TEXT\\
}
\Params{
{\em p} & TEXT & The port to write to\\
{\em [$t_1,\dots,t_n$]} & \altype{List} TREE & The arguments of the operator\\
{\em paren?} & TREE $\to$ \altype{Boolean} & The parenthetization function\\
{\em farg} & (TEXT, TREE) $\to$ TEXT & The function for the arguments\\
{\em op} & \altype{String} & The prefix symbol\\
{\em left} & \altype{String} & The left parenthesis (optional)\\
{\em right} & \altype{String} & The right parenthesis (optional)\\
}
\begin{aswhere}
TEXT &==& \altype{TextWriter}\\
TREE &==& \altype{ExpressionTree}\\
\end{aswhere}
\Descr{Writes $op(farg(t_1),\dots,farg(t_n))$ to $p$, calling $farg$
on each argument. Uses $left$ and $right$, which default to ``('' and ``)''
for parenthetizing. The unary version calls $paren?$ to decide whether
to parenthetize the argument.}
\alseealso{\alexp{infix}}
