\thistype{Shell}
\History{Manuel Bronstein}{10/01/96}{created}
\Usage{import from \this(P, R, E)}
\Params{
P & \altype{Parser} & A parser type for the input\\
R & \altype{PartialRing} & Resulting type of the evaluation\\
E & \altype{Evaluator} R & An interpreter with target type R\\
}
\Descr{\this(P, R, E) provides a basic read-eval-loop that converts its input
to expressions of type R.}
\begin{exports}
\alexp{center}: & (TW, \altype{String}) $\to$ TW & center a line of text\\
\alexp{shell!}: &
(P, TW, TW, \altype{SymbolTable} R, \altype{Boolean}, \altype{Boolean},
\altype{String}) $\to$ Z &
Read-eval loop\\
\end{exports}
\begin{aswhere}
TW &==& \altype{TextWriter}\\
Z &==& \altype{MachineInteger}\\
\end{aswhere}
\alpage{center}
\Usage{\name(p, s)}
\Signature{(\altype{TextWriter}, \altype{String})}{\altype{TextWriter}}
\Params{
{\em p} & \altype{TextWriter} & The port to write to\\
{\em s} & \altype{String} & A string to center\\
}
\Descr{Writes {\em s} centered in a 66-character line to the port {\em p},
followed by a newline, and returns the port after the write.}
\alpage{shell!}
\Usage{\name(r, $p_1, p_2$, t, verbose?, time?, s)}
\Signature{(P, TW, TW, \altype{SymbolTable} R,
\altype{Boolean}, \altype{Boolean}, \altype{String})}{\altype{MachineInteger}}
\begin{alwhere}
TW &==& \altype{TextWriter}\\
\end{alwhere}
\Params{
{\em r} & P & A parser\\
$p_1,p_2$ & \altype{TextWriter} & The ports to write to\\
{\em t} & \altype{SymbolTable} R & The initial symbol table\\
{\em verbose?} & \altype{Boolean} & Select verbose or quiet mode\\
{\em time?} & \altype{Boolean} & Select whether to return times in msecs\\
{\em s} & \altype{String} & A string to write after processing commands\\
}
\Descr{Starts a read-eval loop which takes its input from r and writes
its output to $p_1$ or $p_2$. Mathematical output generated by user commands
is written to $p_1$, while prompts and execution times are written to $p_2$.
if verbose? is \false{} (quiet mode), nothing is printed to $p_2$ and no
prompts or execution times are communicated.
Regardless of verbose?,
if time? is \true, then the execution and garbage collection times
are written to $p_1$ in milliseconds after each command.
If s is not empty, then
it is sent to $p_1$ after each command is executed.
The table t contains the initial environment, and can be modified by the loop.
Returns an integer $n = b_1 b_0$ where $b_0$ is 1 if a syntax error occured,
0 otherwise, and $b_1$ is 1 if any other error occured, 0 otherwise.}
